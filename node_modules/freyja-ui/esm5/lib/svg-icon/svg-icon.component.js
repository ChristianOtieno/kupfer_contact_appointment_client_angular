import * as tslib_1 from "tslib";
// Angular Imports
import { Component, Input, ElementRef, ViewEncapsulation } from '@angular/core';
import { take } from 'rxjs/operators';
// Internal Imports
import { IconRegistryService } from './icon-registry.service';
import { BaseComponent } from '../shared/base.component';
/**
 * Freyja SVG ICON Component according to specifics of Freyja Design
 */
var SvgIconComponent = /** @class */ (function (_super) {
    tslib_1.__extends(SvgIconComponent, _super);
    /**
     * Capture reference to element ref to inject svg into html
     * @param _iconRegistryService Icon Registry service to pull and cache icons
     * @param _elementRef Reference to Component HTML to inject SVG
     */
    function SvgIconComponent(_iconRegistryService, _elementRef) {
        var _this = _super.call(this) || this;
        _this._iconRegistryService = _iconRegistryService;
        _this._elementRef = _elementRef;
        /**
         * Name of icon or svg file to be pulled from cdn/repository
         */
        _this.svgName = '';
        /**
         * If it's going to be inline to other content
         */
        _this.inline = true;
        _this.iconClass = '';
        _this.fillColor = '#BFBFBF';
        _this.display = 'inline-flex';
        _this.opacity = 1;
        return _this;
    }
    /**
     * Load Icon SCG from Service
     */
    SvgIconComponent.prototype.ngOnInit = function () {
        this.loadSvgIconByName();
    };
    /**
     * Method to call registry service to get icon svg
     */
    SvgIconComponent.prototype.loadSvgIconByName = function () {
        var _this = this;
        if (this.svgName) {
            this._iconRegistryService.addSvgIcon(this.svgName).pipe(take(1)).subscribe(function (svg) { return _this.insertSvgElement(svg); }, function (err) { return console.log("Error retrieving icon: " + err.message); });
        }
    };
    /**
     * Insert SVG content to component nativeElement
     * @param svg SVG content for icon fetch from service
     */
    SvgIconComponent.prototype.insertSvgElement = function (svg) {
        this.clearSvgElement();
        this._elementRef.nativeElement.appendChild(svg);
    };
    /**
     * Clear Component SVG before inserting
     */
    SvgIconComponent.prototype.clearSvgElement = function () {
        var layoutElement = this._elementRef.nativeElement;
        var childCount = layoutElement.childNodes.length;
        for (var i = 0; i < childCount; i++) {
            layoutElement.removeChild(layoutElement.childNodes[i]);
        }
    };
    /**
     * Capture on change and update classes
     */
    SvgIconComponent.prototype.ngOnChanges = function () {
        this.generateClass();
    };
    /**
     * @description Generates the class for the icon
     */
    SvgIconComponent.prototype.generateClass = function () {
        this.class = this.iconClass + " "
            + ((this.fillColor ? 'icon--fill--' + this.fillColor : '') + " ")
            + ("" + (this.strokeColor ? 'icon--stroke--' + this.strokeColor : ''));
    };
    SvgIconComponent.decorators = [
        { type: Component, args: [{
                    selector: 'fj-svg-icon',
                    template: "",
                    encapsulation: ViewEncapsulation.None,
                    styles: ["svg{width:24px;height:24px}"]
                }] }
    ];
    /** @nocollapse */
    SvgIconComponent.ctorParameters = function () { return [
        { type: IconRegistryService },
        { type: ElementRef }
    ]; };
    SvgIconComponent.propDecorators = {
        svgName: [{ type: Input }],
        inline: [{ type: Input }],
        iconClass: [{ type: Input }],
        width: [{ type: Input }],
        fillColor: [{ type: Input }],
        strokeColor: [{ type: Input }],
        display: [{ type: Input }],
        opacity: [{ type: Input }]
    };
    return SvgIconComponent;
}(BaseComponent));
export { SvgIconComponent };
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoic3ZnLWljb24uY29tcG9uZW50LmpzIiwic291cmNlUm9vdCI6Im5nOi8vZnJleWphLXVpLyIsInNvdXJjZXMiOlsibGliL3N2Zy1pY29uL3N2Zy1pY29uLmNvbXBvbmVudC50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiO0FBQUEsa0JBQWtCO0FBQ2xCLE9BQU8sRUFBRSxTQUFTLEVBQVUsS0FBSyxFQUFhLFVBQVUsRUFBRSxpQkFBaUIsRUFBRSxNQUFNLGVBQWUsQ0FBQztBQUNuRyxPQUFPLEVBQUUsSUFBSSxFQUFFLE1BQU0sZ0JBQWdCLENBQUM7QUFFdEMsbUJBQW1CO0FBQ25CLE9BQU8sRUFBRSxtQkFBbUIsRUFBRSxNQUFNLHlCQUF5QixDQUFDO0FBQzlELE9BQU8sRUFBRSxhQUFhLEVBQUUsTUFBTSwwQkFBMEIsQ0FBQztBQUV6RDs7R0FFRztBQUNIO0lBTXNDLDRDQUFhO0lBbUJqRDs7OztPQUlHO0lBQ0gsMEJBQW9CLG9CQUF5QyxFQUNwRCxXQUF1QjtRQURoQyxZQUVJLGlCQUFPLFNBQ1I7UUFIaUIsMEJBQW9CLEdBQXBCLG9CQUFvQixDQUFxQjtRQUNwRCxpQkFBVyxHQUFYLFdBQVcsQ0FBWTtRQXZCaEM7O1dBRUc7UUFDTSxhQUFPLEdBQUcsRUFBRSxDQUFDO1FBRXRCOztXQUVHO1FBQ00sWUFBTSxHQUFZLElBQUksQ0FBQztRQUV2QixlQUFTLEdBQUcsRUFBRSxDQUFDO1FBRWYsZUFBUyxHQUFHLFNBQVMsQ0FBQztRQUV0QixhQUFPLEdBQUcsYUFBYSxDQUFDO1FBQ3hCLGFBQU8sR0FBRyxDQUFDLENBQUM7O0lBVW5CLENBQUM7SUFFSDs7T0FFRztJQUNILG1DQUFRLEdBQVI7UUFDRSxJQUFJLENBQUMsaUJBQWlCLEVBQUUsQ0FBQztJQUMzQixDQUFDO0lBRUQ7O09BRUc7SUFDSyw0Q0FBaUIsR0FBekI7UUFBQSxpQkFPQztRQU5DLElBQUksSUFBSSxDQUFDLE9BQU8sRUFBRTtZQUNoQixJQUFJLENBQUMsb0JBQW9CLENBQUMsVUFBVSxDQUFDLElBQUksQ0FBQyxPQUFPLENBQUMsQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsU0FBUyxDQUN4RSxVQUFBLEdBQUcsSUFBSSxPQUFBLEtBQUksQ0FBQyxnQkFBZ0IsQ0FBQyxHQUFHLENBQUMsRUFBMUIsQ0FBMEIsRUFDakMsVUFBQyxHQUFVLElBQUssT0FBQSxPQUFPLENBQUMsR0FBRyxDQUFDLDRCQUEwQixHQUFHLENBQUMsT0FBUyxDQUFDLEVBQXBELENBQW9ELENBQ3JFLENBQUM7U0FDSDtJQUNILENBQUM7SUFHRDs7O09BR0c7SUFDSywyQ0FBZ0IsR0FBeEIsVUFBeUIsR0FBZTtRQUN0QyxJQUFJLENBQUMsZUFBZSxFQUFFLENBQUM7UUFFdkIsSUFBSSxDQUFDLFdBQVcsQ0FBQyxhQUFhLENBQUMsV0FBVyxDQUFDLEdBQUcsQ0FBQyxDQUFDO0lBQ2xELENBQUM7SUFFRDs7T0FFRztJQUNLLDBDQUFlLEdBQXZCO1FBQ0UsSUFBTSxhQUFhLEdBQWdCLElBQUksQ0FBQyxXQUFXLENBQUMsYUFBYSxDQUFDO1FBQ2xFLElBQU0sVUFBVSxHQUFHLGFBQWEsQ0FBQyxVQUFVLENBQUMsTUFBTSxDQUFDO1FBRW5ELEtBQUssSUFBSSxDQUFDLEdBQUcsQ0FBQyxFQUFFLENBQUMsR0FBRyxVQUFVLEVBQUUsQ0FBQyxFQUFFLEVBQUU7WUFDbkMsYUFBYSxDQUFDLFdBQVcsQ0FBQyxhQUFhLENBQUMsVUFBVSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUM7U0FDeEQ7SUFDSCxDQUFDO0lBRUQ7O09BRUc7SUFDSCxzQ0FBVyxHQUFYO1FBQ0UsSUFBSSxDQUFDLGFBQWEsRUFBRSxDQUFDO0lBQ3ZCLENBQUM7SUFHRDs7T0FFRztJQUNJLHdDQUFhLEdBQXBCO1FBQ0UsSUFBSSxDQUFDLEtBQUssR0FBTSxJQUFJLENBQUMsU0FBUyxNQUFHO2VBQzdCLENBQUcsSUFBSSxDQUFDLFNBQVMsQ0FBQyxDQUFDLENBQUMsY0FBYyxHQUFHLElBQUksQ0FBQyxTQUFTLENBQUMsQ0FBQyxDQUFDLEVBQUUsT0FBRyxDQUFBO2VBQzNELE1BQUcsSUFBSSxDQUFDLFdBQVcsQ0FBQyxDQUFDLENBQUMsZ0JBQWdCLEdBQUcsSUFBSSxDQUFDLFdBQVcsQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFFLENBQUEsQ0FBQztJQUN2RSxDQUFDOztnQkE1RkYsU0FBUyxTQUFDO29CQUNULFFBQVEsRUFBRSxhQUFhO29CQUN2QixZQUF3QztvQkFFeEMsYUFBYSxFQUFFLGlCQUFpQixDQUFDLElBQUk7O2lCQUN0Qzs7OztnQkFYUSxtQkFBbUI7Z0JBSmtCLFVBQVU7OzswQkFxQnJELEtBQUs7eUJBS0wsS0FBSzs0QkFFTCxLQUFLO3dCQUNMLEtBQUs7NEJBQ0wsS0FBSzs4QkFDTCxLQUFLOzBCQUNMLEtBQUs7MEJBQ0wsS0FBSzs7SUF1RVIsdUJBQUM7Q0FBQSxBQTlGRCxDQU1zQyxhQUFhLEdBd0ZsRDtTQXhGWSxnQkFBZ0IiLCJzb3VyY2VzQ29udGVudCI6WyIvLyBBbmd1bGFyIEltcG9ydHNcbmltcG9ydCB7IENvbXBvbmVudCwgT25Jbml0LCBJbnB1dCwgT25DaGFuZ2VzLCBFbGVtZW50UmVmLCBWaWV3RW5jYXBzdWxhdGlvbiB9IGZyb20gJ0Bhbmd1bGFyL2NvcmUnO1xuaW1wb3J0IHsgdGFrZSB9IGZyb20gJ3J4anMvb3BlcmF0b3JzJztcblxuLy8gSW50ZXJuYWwgSW1wb3J0c1xuaW1wb3J0IHsgSWNvblJlZ2lzdHJ5U2VydmljZSB9IGZyb20gJy4vaWNvbi1yZWdpc3RyeS5zZXJ2aWNlJztcbmltcG9ydCB7IEJhc2VDb21wb25lbnQgfSBmcm9tICcuLi9zaGFyZWQvYmFzZS5jb21wb25lbnQnO1xuXG4vKipcbiAqIEZyZXlqYSBTVkcgSUNPTiBDb21wb25lbnQgYWNjb3JkaW5nIHRvIHNwZWNpZmljcyBvZiBGcmV5amEgRGVzaWduXG4gKi9cbkBDb21wb25lbnQoe1xuICBzZWxlY3RvcjogJ2ZqLXN2Zy1pY29uJyxcbiAgdGVtcGxhdGVVcmw6ICcuL3N2Zy1pY29uLmNvbXBvbmVudC5odG1sJyxcbiAgc3R5bGVVcmxzOiBbJy4vc3ZnLWljb24uY29tcG9uZW50LnNjc3MnXSxcbiAgZW5jYXBzdWxhdGlvbjogVmlld0VuY2Fwc3VsYXRpb24uTm9uZSxcbn0pXG5leHBvcnQgY2xhc3MgU3ZnSWNvbkNvbXBvbmVudCBleHRlbmRzIEJhc2VDb21wb25lbnQgaW1wbGVtZW50cyBPbkluaXQsIE9uQ2hhbmdlcyB7XG5cbiAgLyoqXG4gICAqIE5hbWUgb2YgaWNvbiBvciBzdmcgZmlsZSB0byBiZSBwdWxsZWQgZnJvbSBjZG4vcmVwb3NpdG9yeVxuICAgKi9cbiAgQElucHV0KCkgc3ZnTmFtZSA9ICcnO1xuXG4gIC8qKlxuICAgKiBJZiBpdCdzIGdvaW5nIHRvIGJlIGlubGluZSB0byBvdGhlciBjb250ZW50XG4gICAqL1xuICBASW5wdXQoKSBpbmxpbmU6IEJvb2xlYW4gPSB0cnVlO1xuXG4gIEBJbnB1dCgpIGljb25DbGFzcyA9ICcnO1xuICBASW5wdXQoKSB3aWR0aDogbnVtYmVyO1xuICBASW5wdXQoKSBmaWxsQ29sb3IgPSAnI0JGQkZCRic7XG4gIEBJbnB1dCgpIHN0cm9rZUNvbG9yOiBzdHJpbmc7XG4gIEBJbnB1dCgpIGRpc3BsYXkgPSAnaW5saW5lLWZsZXgnO1xuICBASW5wdXQoKSBvcGFjaXR5ID0gMTtcblxuICAvKipcbiAgICogQ2FwdHVyZSByZWZlcmVuY2UgdG8gZWxlbWVudCByZWYgdG8gaW5qZWN0IHN2ZyBpbnRvIGh0bWxcbiAgICogQHBhcmFtIF9pY29uUmVnaXN0cnlTZXJ2aWNlIEljb24gUmVnaXN0cnkgc2VydmljZSB0byBwdWxsIGFuZCBjYWNoZSBpY29uc1xuICAgKiBAcGFyYW0gX2VsZW1lbnRSZWYgUmVmZXJlbmNlIHRvIENvbXBvbmVudCBIVE1MIHRvIGluamVjdCBTVkdcbiAgICovXG4gIGNvbnN0cnVjdG9yKHByaXZhdGUgX2ljb25SZWdpc3RyeVNlcnZpY2U6IEljb25SZWdpc3RyeVNlcnZpY2UsXG4gICAgcHVibGljIF9lbGVtZW50UmVmOiBFbGVtZW50UmVmKSB7XG4gICAgICBzdXBlcigpO1xuICAgIH1cblxuICAvKipcbiAgICogTG9hZCBJY29uIFNDRyBmcm9tIFNlcnZpY2VcbiAgICovXG4gIG5nT25Jbml0KCkge1xuICAgIHRoaXMubG9hZFN2Z0ljb25CeU5hbWUoKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBNZXRob2QgdG8gY2FsbCByZWdpc3RyeSBzZXJ2aWNlIHRvIGdldCBpY29uIHN2Z1xuICAgKi9cbiAgcHJpdmF0ZSBsb2FkU3ZnSWNvbkJ5TmFtZSgpIHtcbiAgICBpZiAodGhpcy5zdmdOYW1lKSB7XG4gICAgICB0aGlzLl9pY29uUmVnaXN0cnlTZXJ2aWNlLmFkZFN2Z0ljb24odGhpcy5zdmdOYW1lKS5waXBlKHRha2UoMSkpLnN1YnNjcmliZShcbiAgICAgICAgc3ZnID0+IHRoaXMuaW5zZXJ0U3ZnRWxlbWVudChzdmcpLFxuICAgICAgICAoZXJyOiBFcnJvcikgPT4gY29uc29sZS5sb2coYEVycm9yIHJldHJpZXZpbmcgaWNvbjogJHtlcnIubWVzc2FnZX1gKVxuICAgICAgKTtcbiAgICB9XG4gIH1cblxuXG4gIC8qKlxuICAgKiBJbnNlcnQgU1ZHIGNvbnRlbnQgdG8gY29tcG9uZW50IG5hdGl2ZUVsZW1lbnRcbiAgICogQHBhcmFtIHN2ZyBTVkcgY29udGVudCBmb3IgaWNvbiBmZXRjaCBmcm9tIHNlcnZpY2VcbiAgICovXG4gIHByaXZhdGUgaW5zZXJ0U3ZnRWxlbWVudChzdmc6IFNWR0VsZW1lbnQpIHtcbiAgICB0aGlzLmNsZWFyU3ZnRWxlbWVudCgpO1xuXG4gICAgdGhpcy5fZWxlbWVudFJlZi5uYXRpdmVFbGVtZW50LmFwcGVuZENoaWxkKHN2Zyk7XG4gIH1cblxuICAvKipcbiAgICogQ2xlYXIgQ29tcG9uZW50IFNWRyBiZWZvcmUgaW5zZXJ0aW5nXG4gICAqL1xuICBwcml2YXRlIGNsZWFyU3ZnRWxlbWVudCgpIHtcbiAgICBjb25zdCBsYXlvdXRFbGVtZW50OiBIVE1MRWxlbWVudCA9IHRoaXMuX2VsZW1lbnRSZWYubmF0aXZlRWxlbWVudDtcbiAgICBjb25zdCBjaGlsZENvdW50ID0gbGF5b3V0RWxlbWVudC5jaGlsZE5vZGVzLmxlbmd0aDtcblxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgY2hpbGRDb3VudDsgaSsrKSB7XG4gICAgICBsYXlvdXRFbGVtZW50LnJlbW92ZUNoaWxkKGxheW91dEVsZW1lbnQuY2hpbGROb2Rlc1tpXSk7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIENhcHR1cmUgb24gY2hhbmdlIGFuZCB1cGRhdGUgY2xhc3Nlc1xuICAgKi9cbiAgbmdPbkNoYW5nZXMoKSB7XG4gICAgdGhpcy5nZW5lcmF0ZUNsYXNzKCk7XG4gIH1cblxuXG4gIC8qKlxuICAgKiBAZGVzY3JpcHRpb24gR2VuZXJhdGVzIHRoZSBjbGFzcyBmb3IgdGhlIGljb25cbiAgICovXG4gIHB1YmxpYyBnZW5lcmF0ZUNsYXNzKCkge1xuICAgIHRoaXMuY2xhc3MgPSBgJHt0aGlzLmljb25DbGFzc30gYFxuICAgICAgKyBgJHt0aGlzLmZpbGxDb2xvciA/ICdpY29uLS1maWxsLS0nICsgdGhpcy5maWxsQ29sb3IgOiAnJ30gYFxuICAgICAgKyBgJHt0aGlzLnN0cm9rZUNvbG9yID8gJ2ljb24tLXN0cm9rZS0tJyArIHRoaXMuc3Ryb2tlQ29sb3IgOiAnJ31gO1xuICB9XG5cbn1cbiJdfQ==